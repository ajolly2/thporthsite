<!-- Cleaned version: all social/news RSS feeds removed -->
<!-- You can now rebuild from scratch without preloaded RSS data -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>THPORTH</title>
    <link
      rel="icon"
      type="image/png"
      href="https://github.com/ajolly2/thporthsite/blob/main/thporth_favicon.png?raw=true"
    />
    <!-- styles remain unchanged -->
  </head>
  <body>
    <div id="topBar"></div>
    <div id="topDivider"></div>
    <div class="container">
      <!-- MAIN MENU COLUMN -->
      <!-- ... Unchanged menu column ... -->

      <div class="divider"></div>

      <!-- NEWS PANEL -->
      <div class="column news">
        <div id="newsHeader">News</div>
        <div id="newsSubMenu">
          <span class="news-menu-item active" data-feed="ESPN">ESPN</span>
          <span class="news-menu-item" data-feed="CBS">CBS</span>
          <span class="news-menu-item" data-feed="FOX">FOX</span>
          <span class="news-menu-item" data-feed="Yahoo">Yahoo</span>
        </div>
        <div id="news-Home" class="content-section" style="display: block;">
          <div class="rss-feed" id="feed-ESPN">
            <h4>ESPN</h4>
            <div class="feed-content">Loading ESPN feed...</div>
          </div>
          <div class="rss-feed" id="feed-CBS">
            <h4>CBS</h4>
            <div class="feed-content">Loading CBS feed...</div>
          </div>
          <div class="rss-feed" id="feed-FOX">
            <h4>FOX</h4>
            <div class="feed-content">Loading FOX feed...</div>
          </div>
          <div class="rss-feed" id="feed-Yahoo">
            <h4>Yahoo</h4>
            <div class="feed-content">Loading Yahoo feed...</div>
          </div>
        </div>
        <!-- All other news divs are removed to start fresh -->
      </div>

      <div class="divider"></div>

      <!-- SOCIAL PANEL -->
      <div class="column social">
        <div id="socialHeader">Social</div>
        <div id="social-feed-container">
          <div style="padding: 10px; font-size: 12px;">Loading feed...</div>
        </div>
      </div>
    </div>

    <script src="https://widget.rss.app/v1/feed.js" async></script>

    <script>
      // Empty rssFeeds to start clean
      const rssFeeds = {};
      let currentFeed = null;

      function loadSocialFeed(section) {
        const container = document.getElementById("social-feed-container");
        if (currentFeed === section) return;
        container.innerHTML = "";
        const feedId = rssFeeds[section];
        if (feedId) {
          const feedTag = document.createElement("rssapp-feed");
          feedTag.setAttribute("id", feedId);
          container.appendChild(feedTag);
        } else {
          container.innerHTML = "<div style='padding: 10px;'>No social feed available for this section.</div>";
        }
        currentFeed = section;
      }

      document.addEventListener("DOMContentLoaded", () => {
        loadSocialFeed("Home");
        document.querySelectorAll("#menuList li[data-section]").forEach(item => {
          item.addEventListener("click", () => {
            loadSocialFeed(item.dataset.section);
          });
        });
      });

      document.addEventListener("DOMContentLoaded", () => {
        function fetchFeed(containerSelector, feedUrl) {
          const container = document.querySelector(containerSelector);
          if (!container) return;
          fetch(feedUrl)
            .then(res => res.text())
            .then(str => {
              const parser = new DOMParser();
              const xml = parser.parseFromString(str, "application/xml");
              const items = Array.from(xml.querySelectorAll("item"));
              if (items.length > 0) {
                const ul = document.createElement("ul");
                items.forEach(item => {
                  const title = item.querySelector("title")?.textContent || "No title";
                  const link = item.querySelector("link")?.textContent || "#";
                  const li = document.createElement("li");
                  const a = document.createElement("a");
                  a.href = link;
                  a.target = "_blank";
                  a.textContent = title;
                  li.appendChild(a);
                  ul.appendChild(li);
                });
                container.innerHTML = "";
                container.appendChild(ul);
                ul.querySelectorAll("a").forEach(link => {
                  link.addEventListener("click", () => {
                    link.classList.add("clicked");
                  });
                });
              } else {
                container.innerHTML = "<p>No items found.</p>";
              }
            })
            .catch(error => {
              console.error("Error loading feed:", error);
              container.innerHTML = "<p>Error loading feed.</p>";
            });
        }

        // Only Home feeds for now
        const feedMap = {
          ESPN: "https://www.espn.com/espn/rss/news",
          CBS: "https://rss.app/feeds/oVrPZDHkkJB8bEKG.xml",
          FOX: "https://rss.app/feeds/KzC1hdnt93oattSD.xml",
          Yahoo: "https://rss.app/feeds/3BSRBZ6GJrUbB5PC.xml"
        };

        Object.entries(feedMap).forEach(([key, url]) => {
          fetchFeed(`#feed-${key} .feed-content`, url);
        });
      });
    </script>
  </body>
</html>
